---
keywords: Client Care, CNAME, Zertifikatprogramm, Canonical Name, Cookies, Zertifikat, AMC, Adobe Managed Certificate, DigiCert, Domain-Steuerungs-Validierung, DCV, Client Care2
description: Arbeiten Sie mit [!UICONTROL Adobe Client Care] zusammen, um die CNAME-UnterstÃ¼tzung (Canonical Name [!DNL Adobe Target]  zu implementieren und Probleme mit der Anzeigenblockierung zu beheben.
title: Wie verwende ich CNAME in Target?
feature: Privacy & Security
exl-id: 5709df5b-6c21-4fea-b413-ca2e4912d6cb
source-git-commit: 04dfc34bcd3e7efbf73cd167334b440d42cafd1b
workflow-type: tm+mt
source-wordcount: '1169'
ht-degree: 1%

---

# CNAME und Target

Anweisungen fÃ¼r die Arbeit mit [!DNL Adobe Client Care] zur Implementierung der CNAME-UnterstÃ¼tzung (kanonischer Name) in [!DNL Adobe Target]. Verwenden Sie CNAME, um Probleme mit Anzeigen oder Sperren von ITP-bezogenen (Intelligent Tracking Prevention) Cookie-Richtlinien zu behandeln. Mit CNAME wird eine Domain aufgerufen, die dem Kunden gehÃ¶rt, und keine Domain, die Adobe gehÃ¶rt.

## CNAME-UnterstÃ¼tzung in Target anfordern

1. Bestimmen Sie die Liste der Hostnamen, die Sie fÃ¼r Ihr SSL-Zertifikat benÃ¶tigen (siehe FAQ unten).

1. Erstellen Sie fÃ¼r jeden Host-Namen einen CNAME-Eintrag in Ihrem DNS, der auf Ihren regulÃ¤ren [!DNL Target]-Host-`clientcode.tt.omtrdc.net` verweist.

   Wenn Ihr Client-Code beispielsweise â€žcnamecustomerâ€œ lautet und Ihr vorgeschlagener Hostname `target.example.com` ist, sieht Ihr DNS-CNAME-Eintrag in etwa wie folgt aus:

   ```
   target.example.com.  IN  CNAME  cnamecustomer.tt.omtrdc.net.
   ```

   >[!WARNING]
   >
   >Die Adobe-Zertifizierungsstelle DigiCert kann erst dann ein Zertifikat ausstellen, wenn dieser Schritt abgeschlossen ist. Daher kann Adobe Ihre Anfrage nach einer CNAME-Implementierung erst erfÃ¼llen, wenn dieser Schritt abgeschlossen ist.

1. [FÃ¼llen Sie dieses Formular aus](assets/FPC_Request_Form.xlsx) und schlieÃŸen Sie es ein, wenn Sie [ein Adobe-Ticket fÃ¼r die KundenunterstÃ¼tzung Ã¶ffnen, um CNAME-UnterstÃ¼tzung anzufordern](https://experienceleague.adobe.com/docs/target/using/cmp-resources-and-contact-information.html?#reference_ACA3391A00EF467B87930A450050077C):

   * [!DNL Adobe Target] Clientcode:
   * Hostnamen fÃ¼r SSL-Zertifikate (Beispiel: `target.example.com target.example.org`):
   * SSL-ZertifikatkÃ¤ufer (Adobe wird dringend empfohlen, siehe FAQ): Adobe/Kunde
   * Wenn der Kunde das Zertifikat, auch bekannt als â€žBring Your Own Certificateâ€œ (BYOC), kauft, fÃ¼llen Sie diese zusÃ¤tzlichen Details aus:
      * Zertifikatorganisation (Beispiel: Firma Inc):
      * Organisationseinheit des Zertifikats (optional, Beispiel: Marketing):
      * Zertifikatland (Beispiel: USA):
      * Zertifikatstaat/-region (Beispiel: Kalifornien):
      * Zertifikatstadt (Beispiel: San Jose):

1. Wenn Adobe das Zertifikat erwirbt, kauft und implementiert Adobe das Zertifikat gemeinsam mit DigiCert auf den Adobe-Produktionsservern.

   Wenn der Kunde das Zertifikat (BYOC) erwirbt, sendet Ihnen die Adobe-KundenunterstÃ¼tzung die Certificate Signing Request (CSR). Verwenden Sie die CSR beim Kauf des Zertifikats Ã¼ber Ihre Zertifizierungsstelle Ihrer Wahl. Nachdem das Zertifikat ausgestellt wurde, senden Sie eine Kopie des Zertifikats und aller Zwischenzertifikate zur Bereitstellung an die Adobe-KundenunterstÃ¼tzung.

   Die Adobe-KundenunterstÃ¼tzung benachrichtigt Sie, wenn Ihre Implementierung bereit ist.

1. Aktualisieren Sie die `serverDomain` [Dokumentation](../implement/client-side/atjs/atjs-functions/targetglobalsettings.md#serverdomain) auf den neuen CNAME-Hostnamen und legen Sie `overrideMboxEdgeServer` in Ihrer at.js`false`[ auf ](../implement/client-side/atjs/atjs-functions/targetglobalsettings.md#overridemboxedgeserver) fest.

## HÃ¤ufig gestellte Fragen  

Mit den folgenden Informationen werden hÃ¤ufig gestellte Fragen zur Anforderung und Implementierung von CNAME-UnterstÃ¼tzung in Target beantwortet:

### Kann ich mein eigenes Zertifikat (bringen Sie Ihr eigenes Zertifikat oder BYOC)?

Sie kÃ¶nnen Ihr eigenes Zertifikat bereitstellen. Adobe empfiehlt diese Vorgehensweise jedoch nicht. Die Verwaltung des SSL-Zertifikatlebenszyklus ist sowohl fÃ¼r Adobe als auch fÃ¼r Sie einfacher, wenn Adobe das Zertifikat kauft und kontrolliert. SSL-Zertifikate mÃ¼ssen jedes Jahr erneuert werden. Daher muss sich der Adobe-Kundendienst jedes Jahr an Sie wenden, um rechtzeitig ein neues Zertifikat zu erhalten. Manchen Kunden fÃ¤llt es unter UmstÃ¤nden schwer, ein verlÃ¤ngertes Zertifikat rechtzeitig zu erstellen. Ihre [!DNL Target]-Implementierung ist gefÃ¤hrdet, wenn das Zertifikat ablÃ¤uft, da Browser Verbindungen verweigern.

>[!WARNING]
>
>Wenn Sie eine CNAME-Implementierung mit [!DNL Target] bring-your-own-certificate anfordern, sind Sie dafÃ¼r verantwortlich, der Adobe-KundenunterstÃ¼tzung jedes Jahr erneuerte Zertifikate bereitzustellen. Wenn Ihr CNAME-Zertifikat ablÃ¤uft, bevor Adobe ein erneuertes Zertifikat bereitstellen kann, fÃ¼hrt dies zu einem Ausfall fÃ¼r Ihre spezifische [!DNL Target].

### Wie lange lÃ¤uft mein neues SSL-Zertifikat ab?

Alle von Adobe erworbenen Zertifikate sind ein Jahr gÃ¼ltig. Weitere [ finden Sie im DigiCert-Artikel ](https://www.digicert.com/blog/position-on-1-year-certificates) 1-Jahres-Zertifikate.

### Welche Hostnamen sollte ich auswÃ¤hlen? Wie viele Hostnamen pro Domain sollte ich auswÃ¤hlen?

Target-CNAME-Implementierungen erfordern nur einen Hostnamen pro Domain im SSL-Zertifikat und im DNS des Kunden. Adobe empfiehlt einen Hostnamen pro Domain. Einige Kunden benÃ¶tigen fÃ¼r ihre eigenen Zwecke mehr Hostnamen pro Domain (z. B. zum Testen in der Staging-Umgebung), was unterstÃ¼tzt wird.

Die meisten Kunden wÃ¤hlen einen Hostnamen wie `target.example.com`. Adobe empfiehlt, diese Vorgehensweise zu befolgen, aber letztendlich haben Sie die Wahl. Fordern Sie keinen Hostnamen eines vorhandenen DNS-Eintrags an. Dies fÃ¼hrt zu einem Konflikt und verzÃ¶gert die LÃ¶sung Ihrer [!DNL Target] CNAME-Anfrage.

### Ich habe bereits eine CNAME-Implementierung fÃ¼r Adobe Analytics. Kann ich dasselbe Zertifikat oder denselben Hostnamen verwenden?

Nein, [!DNL Target] erfordert einen separaten Hostnamen und ein separates Zertifikat.

### Hat ITP 2.x Auswirkungen auf meine aktuelle Implementierung von [!DNL Target]?

Apple Intelligent Tracking Prevention (ITP) Version 2.3 hat die CNAME-Funktion zur Begrenzung von Cloaking (Maskierung) eingefÃ¼hrt, die in der Lage ist, [!DNL Target] CNAME-Implementierungen zu erkennen und den Cookie-Ablauf auf sieben Tage zu reduzieren. Derzeit gibt es in [!DNL Target] keine Problemumgehung fÃ¼r die CNAME Cloaking Mitigation von ITP. Weitere Informationen zu ITP finden Sie unter [Apple Intelligent Tracking Prevention (ITP) 2.x](../before-implement/privacy/apple-itp-2x.md).

### Mit welcher Art von Service-Unterbrechungen kann ich rechnen, wenn meine CNAME-Implementierung bereitgestellt wird?

Bei der Bereitstellung des Zertifikats kommt es zu keiner Service-Unterbrechung (einschlieÃŸlich ZertifikatsverlÃ¤ngerungen).

Nachdem Sie jedoch den Hostnamen in Ihrem [!DNL Target]-Implementierungs-Code (`serverDomain` in at.js) in den neuen CNAME-Hostnamen (`target.example.com`) geÃ¤ndert haben, behandeln Webbrowser wiederkehrende Besucher als neue Besucher. Die Profildaten der wiederkehrenden Besucher gehen verloren, da unter dem alten Hostnamen (`clientcode.tt.omtrdc.net`) nicht auf das vorherige Cookie zugegriffen werden kann. Auf das vorherige Cookie kann aufgrund von Browser-Sicherheitsmodellen nicht zugegriffen werden. Diese Unterbrechung tritt nur beim erstmaligen Umschalten auf den neuen CNAME auf. ZertifikatsverlÃ¤ngerungen haben nicht dieselbe Wirkung, da sich der Hostname nicht Ã¤ndert.

### Welcher SchlÃ¼sseltyp und welcher Zertifikatsignaturalgorithmus wird fÃ¼r meine CNAME-Implementierung verwendet?

Alle Zertifikate sind RSA SHA-256 und die SchlÃ¼ssel sind standardmÃ¤ÃŸig RSA 2048-Bit. SchlÃ¼sselgrÃ¶ÃŸen, die grÃ¶ÃŸer als 2048 Bit sind, sollten explizit Ã¼ber [!UICONTROL Customer Care] angefordert werden.

### Wie kann ich Ã¼berprÃ¼fen, ob meine CNAME-Implementierung fÃ¼r Traffic bereit ist?

Verwenden Sie die folgenden Befehle (im macOS- oder Linux-Befehlszeilen-Terminal mit bash und curl >=7.49):

1. Kopieren Sie diese Bash-Funktion und fÃ¼gen Sie sie in Ihr Terminal ein, oder fÃ¼gen Sie sie in Ihre Bash-Startskriptdatei ein (normalerweise `~/.bash_profile` oder `~/.bashrc`), damit die Funktion in allen Terminalsitzungen verfÃ¼gbar ist:

   +++Details anzeigen

   ```
   function adobeTargetCnameValidation {
     local hostname="$1"
   
     if [ -z "$hostname" ]; then
       echo "ERROR: no hostname specified"
       return 1
     fi
   
     local service="Adobe Target CNAME implementation"
     local edges="41 42 44 45 46 47 48"
     local edgeDomain="tt.omtrdc.net"
     local edgeFormat="mboxedge%d%s.$edgeDomain"
     local poolDomain="pool.data.adobedc.net"
     local shards=5
     local shardsFoundCount=0
     local shardsFound=""
     local shardsFoundOutput=""
     local curlRegex="subject:.*CN=|expire date:|issuer:"
     local curlValidation="SSL certificate verify ok"
     local curlResponseValidation='"OK"'
     local curlEndpoint="/uptime?mboxClient=uptime3"
     local url="https://$hostname$curlEndpoint"
     local sslShopperUrl="https://www.sslshopper.com/ssl-checker.html#hostname=$hostname"
     local success="âœ…"
     local failure="ðŸš«"
     local info="ðŸ”Ž"
     local rule="="
     local horizontalRule="$(seq ${COLUMNS:-30} | xargs printf "$rule%.0s")"
     local miniRule="$(seq 5 | xargs printf "$rule%.0s")"
     local curlVersion="$(curl --version | head -1 | cut -d' ' -f2)"
     local curlVersionRequired=7.49
     local edgeCount="$(wc -w <<< "$edges" | tr -d ' ')"
     local cnameExists=""
     local endToEndTestSucceeded=""
   
     for region in IRL1 IND1 SIN OR SYD VA TYO; do
       local currShard="${region}-${poolDomain}"
       local curlResult="$(curl -vsm20 --connect-to "$hostname:443:$currShard:443" "$url" 2>&1)"
   
       if grep -q "$curlValidation" <<< "$curlResult"; then
         shardsFound+=" $currShard"
   
         if grep -q "$curlResponseValidation" <<< "$curlResult"; then
           shardsFoundCount=$((shardsFoundCount+1))
           shardsFoundOutput+="\n\n$miniRule $success $hostname [edge shard: $currShard] $miniRule\n"
         else
           shardsFoundOutput+="\n\n$miniRule $failure $hostname [edge shard: $currShard] $miniRule\n"
         fi
   
         shardsFoundOutput+="$(grep -E "$curlRegex" <<< "$curlResult" | sort)"
   
         if ! grep -q "$curlResponseValidation" <<< "$curlResult"; then
           shardsFoundOutput+="\nERROR: unexpected HTTP response from this shard using $url"
         fi
       fi
     done
   
     echo
     echo "$horizontalRule"
     echo
     echo "$service validation for hostname $hostname:"
   
     local dnsOutput="$(dig -t CNAME +short "$hostname" 2>&1)"
     if grep -qFi ".$edgeDomain" <<< "$dnsOutput"; then
       echo "$success $hostname passes DNS CNAME validation"
       cnameExists=true
     else
       echo -n "$failure $hostname FAILED DNS CNAME validation -- "
       if [ -n "$dnsOutput" ]; then
         echo -e "$dnsOutput is not in the subdomain $edgeDomain"
       else
         echo "required DNS CNAME record pointing to <target-client-code>.$edgeDomain not found"
       fi
     fi
   
     for region in IRL1 IND1 SIN OR SYD VA TYO; do
       local curlResult="$(curl -vsm20 --connect-to "$hostname:443:${region}-pool.data.adobedc.net:443" "https://$hostname$curlEndpoint" 2>&1)"
   
       if grep -q "$curlValidation" <<< "$curlResult"; then
         if grep -q "$curlResponseValidation" <<< "$curlResult"; then
           echo -en "$success $hostname passes TLS and HTTP response validation for region $region"
           if [ -n "$cnameExists" ]; then
             echo
           else
             echo " -- the DNS CNAME is not pointing to the correct subdomain for ${service}s with Adobe-managed certificates" \
               "(bring-your-own-certificate implementations don't have this requirement), but this test passes as configured"
           fi
           endToEndTestSucceeded=true
         else
           echo -n "$failure $hostname FAILED HTTP response validation for region $region --" \
             "unexpected response from $url -- "
           if [ -n "$cnameExists" ]; then
             echo "DNS is NOT pointing to the correct shard, notify Adobe Client Care"
           else
             echo "the required DNS CNAME record is missing, see above"
           fi
         fi
       else
         echo -n "$failure $hostname FAILED TLS validation for region $region -- "
         if [ -n "$cnameExists" ]; then
           echo "DNS is likely NOT pointing to the correct shard or there's a validation issue with the certificate or" \
             "protocols, see curl output below and optionally SSL Shopper ($sslShopperUrl):"
           echo ""
           echo "$horizontalRule"
           echo "$curlResult" | sed 's/^/    /g'
           echo "$horizontalRule"
           echo ""
         else
           echo "the required DNS CNAME record is missing, see above"
         fi
       fi
     done
   
     if [ "$shardsFoundCount" -ge "$edgeCount" ]; then
       echo -n "$success $hostname passes shard validation for the following $shardsFoundCount edge shards:"
       echo -e "$shardsFoundOutput"
       echo
   
       if [ -n "$cnameExists" ] && [ -n "$endToEndTestSucceeded" ]; then
         echo "$horizontalRule"
         echo ""
         echo "  For additional TLS/SSL validation, see SSL Shopper:"
         echo ""
         echo "    $info  $sslShopperUrl"
         echo ""
         echo "  To check DNS propagation around the world, see whatsmydns.net:"
         echo ""
         echo "    $info  DNS A records:     https://whatsmydns.net/#A/$hostname"
         echo "    $info  DNS CNAME record:  https://whatsmydns.net/#CNAME/$hostname"
       fi
     else
       echo -n "$failure $hostname FAILED shard validation -- shards found: $shardsFoundCount," \
         "expected: $edgeCount"
       echo ""
     fi
   
     echo
     echo "$horizontalRule"
     echo
   }
   ```

   +++

1. FÃ¼gen Sie diesen Befehl ein (und ersetzen Sie `target.example.com` durch Ihren Hostnamen):

   ```adobeTargetCnameValidation target.example.com```

   Wenn die Implementierung fertig ist, sehen Sie eine Ausgabe wie unten. Wichtig ist, dass alle Validierungsstatuszeilen `âœ…` statt `ðŸš«` anzeigen. Jede Target Edge-CNAME-Shard sollte `CN=target.example.com` anzeigen, die dem primÃ¤ren Hostnamen im angeforderten Zertifikat entspricht (zusÃ¤tzliche SAN-Hostnamen im Zertifikat werden in dieser Ausgabe nicht gedruckt).

   +++Details anzeigen

   ```
   $ adobeTargetCnameValidation target.example.com
   
   ==========================================================
   
   Adobe Target CNAME implementation validation for hostname target.example.com:
   âœ… target.example.com passes DNS CNAME validation
   âœ… target.example.com passes TLS and HTTP response validation for region IRL1
   âœ… target.example.com passes TLS and HTTP response validation for region IND1
   âœ… target.example.com passes TLS and HTTP response validation for region SIN
   âœ… target.example.com passes TLS and HTTP response validation for region OR
   âœ… target.example.com passes TLS and HTTP response validation for region SYD
   âœ… target.example.com passes TLS and HTTP response validation for region VA
   âœ… target.example.com passes TLS and HTTP response validation for region TYO
   âœ… target.example.com passes shard validation for the following 7 edge shards:
   
   ===== âœ… target.example.com [edge shard: IRL1-pool.data.adobedc.net] =====
   *  expire date: Feb 20 23:59:59 2026 GMT
   *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
   *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com
   
   ===== âœ… target.example.com [edge shard: IND1-pool.data.adobedc.net] =====
   *  expire date: Feb 20 23:59:59 2026 GMT
   *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
   *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com
   
   ===== âœ… target.example.com [edge shard: SIN-pool.data.adobedc.net] =====
   *  expire date: Feb 20 23:59:59 2026 GMT
   *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
   *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com
   
   ===== âœ… target.example.com [edge shard: OR-pool.data.adobedc.net] =====
   *  expire date: Feb 20 23:59:59 2026 GMT
   *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
   *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com
   
   ===== âœ… target.example.com [edge shard: SYD-pool.data.adobedc.net] =====
   *  expire date: Feb 20 23:59:59 2026 GMT
   *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
   *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com
   
   ===== âœ… target.example.com [edge shard: VA-pool.data.adobedc.net] =====
   *  expire date: Feb 20 23:59:59 2026 GMT
   *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
   *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com
   
   ===== âœ… target.example.com [edge shard: TYO-pool.data.adobedc.net] =====
   *  expire date: Feb 20 23:59:59 2026 GMT
   *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
   *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com
   
   ==========================================================  
   
   For additional TLS/SSL validation, see SSL Shopper:
   
       ðŸ”Ž  https://www.sslshopper.com/ssl-checker.html#hostname=target.example.com  
   
   To check DNS propagation around the world, see whatsmydns.net:
   
       ðŸ”Ž  DNS A records:     https://whatsmydns.net/#A/target.example.com
       ðŸ”Ž  DNS CNAME record:  https://whatsmydns.net/#CNAME/target.example.com 
   ```

+++

>[!NOTE]
>
>Wenn dieser Validierungsbefehl bei der DNS-Validierung fehlschlÃ¤gt, Sie jedoch bereits die erforderlichen DNS-Ã„nderungen vorgenommen haben, mÃ¼ssen Sie mÃ¶glicherweise warten, bis Ihre DNS-Aktualisierungen vollstÃ¤ndig weitergegeben werden. DNS-EintrÃ¤ge sind mit einer [TTL (Time-to-Live) verknÃ¼pft](https://en.wikipedia.org/wiki/Time_to_live#DNS_records) die die GÃ¼ltigkeitsdauer des Cache fÃ¼r DNS-Antworten dieser EintrÃ¤ge bestimmt. Daher mÃ¼ssen Sie mÃ¶glicherweise mindestens so lange warten, wie Ihre TTLs. Sie kÃ¶nnen den `dig target.example.com`-Befehl oder [die G Suite Toolbox](https://toolbox.googleapps.com/apps/dig/#CNAME) verwenden, um Ihre spezifischen TTLs zu suchen. Informationen zur ÃœberprÃ¼fung der DNS-Verbreitung auf der ganzen Welt finden Sie unter [whatsmydns.net](https://whatsmydns.net/#CNAME).

### Wie verwende ich einen Ausschluss-Link mit CNAME?

Wenn Sie CNAME verwenden, sollte der Ausschluss-Link beispielsweise den Parameter â€žclient=`clientcode`&quot; enthalten:
`https://my.cname.domain/optout?client=clientcode`.

Ersetzen Sie `clientcode` durch Ihren Client-Code und fÃ¼gen Sie dann den Text oder das Bild hinzu, das mit der [Opt-out-URL) verknÃ¼pft ](privacy/privacy.md) soll.

## Bekannte EinschrÃ¤nkungen

* Der QA-Modus bleibt bei CNAME- und at.js-Versionen 1.x nicht hÃ¤ngen, da er auf einem Drittanbieter-Cookie basiert. Um dieses Problem zu umgehen, fÃ¼gen Sie die Vorschauparameter zu jeder URL hinzu, zu der Sie navigieren. Der QA-Modus bleibt bestehen, wenn Sie CNAME und at.js 2.x verwenden.
* Bei Verwendung von CNAME ist es wahrscheinlicher, dass die GrÃ¶ÃŸe der Cookie-Kopfzeile fÃ¼r [!DNL Target] Aufrufe zunimmt. Adobe empfiehlt, die Cookie-GrÃ¶ÃŸe unter 8 KB zu halten.
